export async function readNotionDatabase({logger}) {
    const notion_key = require('../private/notion.key.json')
    const { Client } = require('@notionhq/client');
    const notion = new Client({ auth: notion_key.key });
    // https://stormy-index-5f8.notion.site/bad2e9022c5f4b338cd995deb52f5b4d?v=1f16896a967b4472a7f8e611857dbfa9
    const databaseId = 'bad2e9022c5f4b338cd995deb52f5b4d'
    const response = await notion.databases.query({
        database_id: databaseId,
        sorts: [
            {
              property: 'Created time',
              direction: 'descending',
            },
          ],
    });
    // example output: {"name":"quisquam-architecto-aliquid_2023-03-02T16:49:18.670Z","hostname":"Zhou.local","pid":40581,"level":30,"response":{"object":"list","results":[{"object":"page","id":"2b2dc0b5-8ee8-4c53-bb10-be867ba958f7","created_time":"2023-03-02T15:20:00.000Z","last_edited_time":"2023-03-02T15:33:00.000Z","created_by":{"object":"user","id":"4fa10787-6e11-4e03-bb43-94c2efe6873c"},"last_edited_by":{"object":"user","id":"4fa10787-6e11-4e03-bb43-94c2efe6873c"},"cover":null,"icon":null,"parent":{"type":"database_id","database_id":"bad2e902-2c5f-4b33-8cd9-95deb52f5b4d"},"archived":false,"properties":{"Created time":{"id":"LYkq","type":"created_time","created_time":"2023-03-02T15:20:00.000Z"},"Tags":{"id":"LvSw","type":"multi_select","multi_select":[]},"GSheet2Notion - Nested":{"id":"~%60be","type":"relation","relation":[],"has_more":false},"Name":{"id":"title","type":"title","title":[{"type":"text","text":{"content":"Fruit","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Fruit","href":null}]}},"url":"https://www.notion.so/Fruit-2b2dc0b58ee84c53bb10be867ba958f7"},{"object":"page","id":"6ef2bc1e-10f9-4aa7-8cd7-8263df05cdd9","created_time":"2023-03-02T15:20:00.000Z","last_edited_time":"2023-03-02T15:35:00.000Z","created_by":{"object":"user","id":"4fa10787-6e11-4e03-bb43-94c2efe6873c"},"last_edited_by":{"object":"user","id":"4fa10787-6e11-4e03-bb43-94c2efe6873c"},"cover":null,"icon":null,"parent":{"type":"database_id","database_id":"bad2e902-2c5f-4b33-8cd9-95deb52f5b4d"},"archived":false,"properties":{"Created time":{"id":"LYkq","type":"created_time","created_time":"2023-03-02T15:20:00.000Z"},"Tags":{"id":"LvSw","type":"multi_select","multi_select":[{"id":"336ae958-ccc5-41e6-abfd-ba0635a4e41a","name":"Hi","color":"pink"}]},"GSheet2Notion - Nested":{"id":"~%60be","type":"relation","relation":[{"id":"9823dae5-0ba5-43a7-8bf0-8cb8a4813c96"},{"id":"a30eca4a-7ff1-4178-8383-733714d23a04"}],"has_more":false},"Name":{"id":"title","type":"title","title":[{"type":"text","text":{"content":"Apple","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Apple","href":null}]}},"url":"https://www.notion.so/Apple-6ef2bc1e10f94aa78cd78263df05cdd9"},{"object":"page","id":"a6389e9e-8039-445e-94e9-ed6feda047a8","created_time":"2023-03-02T15:20:00.000Z","last_edited_time":"2023-03-02T15:35:00.000Z","created_by":{"object":"user","id":"4fa10787-6e11-4e03-bb43-94c2efe6873c"},"last_edited_by":{"object":"user","id":"4fa10787-6e11-4e03-bb43-94c2efe6873c"},"cover":null,"icon":null,"parent":{"type":"database_id","database_id":"bad2e902-2c5f-4b33-8cd9-95deb52f5b4d"},"archived":false,"properties":{"Created time":{"id":"LYkq","type":"created_time","created_time":"2023-03-02T15:20:00.000Z"},"Tags":{"id":"LvSw","type":"multi_select","multi_select":[]},"GSheet2Notion - Nested":{"id":"~%60be","type":"relation","relation":[{"id":"6286017d-e592-4d6d-ae09-828371b7864f"}],"has_more":false},"Name":{"id":"title","type":"title","title":[{"type":"text","text":{"content":"Banana","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"Banana","href":null}]}},"url":"https://www.notion.so/Banana-a6389e9e8039445e94e9ed6feda047a8"}],"next_cursor":null,"has_more":false,"type":"page","page":{}},"msg":"","time":"2023-03-02T16:49:21.106Z","v":0}
    logger.info({
        response
    })
}
